
{%  extends "base.html" %}

{% load static %}
{% load static i18n %}

{% block content %}

<section id="team">
	<div class="container">
        <div class="section-heading text-center text-uppercase wow  wow bounceInRight">
            <br>
            <br>
			<h2>–ú–æ–π<span> –ø—Ä–æ—Ñ–∞–π–ª</span></h2>
            
		</div>
        <div class="row  wow bounceInLeft">
            <div class="col-sm-6 ">
                
                <div class="single-team">

                    {% if request.user.avatar %}                   
                        <img src="{{ user.avatar.url }}" alt="">
                    {% else %}
                        <img src="/static/shop/images/avatar.png" alt="user" style="max-width: 6rem; height: 6rem; border-radius: 50%;aspect-ratio: 1 / 1;">

                    {% endif %}
                    <h3></h3>
                    <p>  {{ user.username }}</p>
                    <p>
                        <i class="fa fa-user" style="font-size:24px"></i>
                        {% if request.user.first_name %}
                            {{request.user.first_name}}
                       
                        {% endif %}
                   
                    
                        {% if request.user.last_name %}
                            {{request.user.last_name}}
                     
                           
                        {% endif %}
                    </p>
                    <p>
                        <i class="fa fa-envelope-o" style="font-size:24px"></i>
                        {% if request.user.email %}
                             {{request.user.email}}
                        
                        {% endif %}
                    </p>
                    <p>
                        <i class="fa fa-calendar-check-o" style="font-size:24px"></i>
                        {% if request.user.birth_date %}
                            {{request.user.birth_date}}
                      
                        {% endif %}
                    </p>
                    <p>
                        {% if request.user.gender == "men" %}
                            <i class="fa fa-child" style="font-size:24px"></i>
                            –ú
                        {% elif  request.user.gender == "women" %}
                            <i class="fa fa-female" style="font-size:24px"></i>
                            –ñ
                        {% else %}
                            <i class="fa fa-child" style="font-size:24px"></i>
                            <i class="fa fa-female" style="font-size:24px"></i>
                            –Ω–µ –≤—ã–±—Ä–∞–Ω
                        {% endif %}

                    </p>
                    <p>
                        <i class="fa fa-phone" style="font-size:24px"></i>
                        
                        {% if request.user.tel %}
                            {{request.user.tel}}
                        
                            
                        {% endif %}
                    </p>
                    <p>
                        <i class="fa fa-commenting-o" style="font-size:24px"></i>
                        {% if request.user.bio %}
                            {{request.user.bio}}
                        
                            
                        {% endif %}
                    </p>
                    <p id="friendCount">
                        <i class="fa fa-users" aria-hidden="true"></i>
                        {% if request.user.friends_count %}
                            {{request.user.friends_count}}
                        {% else %}
                            0
                            
                        {% endif %}
                    </p>
                    <p>
                        
                        <i class="fa fa-heart" style="font-size:24px"></i>
                        {{request.user.like_count}}
                       
                    </p>
                    <p>
                        <i class="fa fa-user-circle-o" aria-hidden="true"></i>

                        {% if request.user.date_joined %}
                            {{request.user.date_joined}}
                        {% endif %}
                    </p>

                    <div class="member-social-icon text-center">
                        {% comment %} <a href="{% url 'account:forum_message' %}">
                            
                            <i class="fa fa-linkedin"></i>
                        </a> {% endcomment %}
                        <a href="{% url 'rooms' %}">
                            
                            <i class="fa fa-comments-o" aria-hidden="true"> –û–±—â–∏–µ —á–∞—Ç—ã</i>

                        </a>
                        <a href="{% url 'direct_messages:my_direct_messages'  %}">
                            <i class="fa fa-users" aria-hidden="true"> –î—Ä—É–∑—å—è</i>

                        </a>
                        <a href="{% url 'account:profile-management' %}">
                            <i class="fa fa-cog"> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</i>
                        </a>
                        
                        
                    </div>
                </div>
                
            </div>
        </div>
        
        

        
        
        <!--posible friends-->
        <h3 style="color:red;"><span>–í–æ–∑–º–æ–∂–Ω–æ –∑–Ω–∞–∫–æ–º—ã?</span></h3>
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∞ -->
        {% comment %} <div id="friendNotification" class="notification" style="color:red;"></div>
        {% if notifications %}
            
                {% for notification in notifications %}
                    <h4 id="notificationMessage_{{ notification.id }}" style="color: red;">
                        {{ notification.message }}
                        <script>
                            setTimeout(function() {
                                document.getElementById('notificationMessage_{{ notification.id }}').style.display = 'none';
                            }, 5000); // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ (5000 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥)
                        </script>
                    </h4>
                {% endfor %}
            
        {% endif %} {% endcomment %}
        <!---->
        <br>
        {% for only_friend in friends %}

        
            <li>
                <audio id="notificationSound">
                    <source src="/media/mp3/ding.mp3" type="audio/mpeg"> 
                </audio>
                <a class="text-uppercase" href="{% url 'account:user_detail' slug=only_friend.slug %}">
                    {% if only_friend.avatar %}                   
                    <img src="{{ only_friend.avatar.url }}" style="max-width: 6rem; height: 6rem; border-radius: 50%;aspect-ratio: 1 / 1;" alt="">
                    {% else %}
                    <img src="/static/shop/images/avatar.png" alt="user" style="max-width: 6rem; height: 6rem; border-radius: 50%;aspect-ratio: 1 / 1;">
                    
                    {% endif %}
                    
                    
                    {{ only_friend.username }}  {{ only_friend.lastname }}
                </a>
                <button class="addFriendBtn" data-friend-id="{{ only_friend.id }}"  style="color: green; max-width:14rem">
                    <i class="fa fa-plus" aria-hidden="true"></i> –≤ –¥—Ä—É–∑—å—è
                </button>
                {% comment %} <button class="removeFriendBtn" data-friend-id="{{ only_friend.id }}" style="color: gray; max-width:14rem">
                    <i class="fa fa-minus" aria-hidden="true"></i>
                </button> {% endcomment %}
            </li>
            
        {% endfor %}
    
        <script>
            $(document).ready(function() {
                $('.addFriendBtn').click(function() {
                    var friendId = $(this).data('friend-id');
                    
                    $.ajax({
                        type: 'POST',
                        url: '/ru/account/dashboard/',
                        data: {
                            'friend_id': friendId,
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                        },
                        dataType: 'json',
                        success: function(data) {
                            if (data.friendCount !== undefined) {
                                
                                document.getElementById('notificationSound').play();
                                $('#friendCount').text(data.friendCount); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–∑–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                                alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –¥—Ä—É–∑—å—è! üéâ');
                                    
                                } else {
                                    alert('–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.');
                                }
  
                        },
                        
                        error: function(xhr, textStatus, error) {
                            console.log(xhr.status + ': ' + xhr.statusText);
                        }
                    });
                });
            
                $('.removeFriendBtn').click(function() {
                    var friendId = $(this).data('friend-id');
                    
                    $.ajax({
                        type: 'POST',
                        url: '/ru/account/dashboard/',
                        data: {
                            'friend_id': friendId,
                            'csrfmiddlewaretoken': '{{ csrf_token }}',
                            'method': 'DELETE' // –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ DELETE
                        },
                        dataType: 'json',
                        success: function(data) {
                            if (data.friendCount !== undefined) {
                                
                                $('#friendCount').text(data.friendCount); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–∑–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                                alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω –∏–∑ –¥—Ä—É–∑–µ–π! üòî');
                                    
                                } else {
                                    alert('–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.');
                            }
                        },
                        
                        error: function(xhr, textStatus, error) {
                            console.log(xhr.status + ': ' + xhr.statusText);
                        }
                    });
                });
                
                
            });
            
        </script>
        <!--posible friends-->
        
    </div>
  
</section>

    
{% endblock %}
